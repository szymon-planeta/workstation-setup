- name: Add apt repositories
  become: yes
  apt_repository:
    repo: "{{ item }}"
    state: present
  with_items:
    - ppa:tista/adapta 
    - ppa:papirus/papirus 
    - ppa:lazygit-team/release

- name: Add packagecloud apt key (for gbt)
  become: yes
  apt_key:
    url: https://packagecloud.io/gbt/release/gpgkey
  
- name: Add gbt.list apt source list
  become: yes
  copy:
    src: gbt.list
    dest: /etc/apt/sources.list.d/gbt.list
    owner: root
    group: root
    mode: u=rw,g=r,o=r

- name: Update and upgrade apt packages
  become: yes
  apt:
    upgrade: yes
    update_cache: yes

- name: Install apt packages
  become: yes
  apt:
    name: "{{ item }}"
    state: present
  with_items:
    - ansible
    - vim
    - git
    - curl
    - tmux
    - xclip
    - htop
    - zsh
    - make
    - pkg-config
    - budgie-desktop-environment
    - slick-greeter
    - adapta-backgrounds
    - adapta-gtk-theme
    - papirus-icon-theme   
    - gbt
    - lazygit
    - silversearcher-ag

- name: Install bat
  become: yes
  apt:
    deb: https://github.com/sharkdp/bat/releases/download/v0.9.0/bat_0.9.0_amd64.deb

- name: Clone fzf repo
  git: 
    repo: https://github.com/junegunn/fzf.git 
    dest: /home/{{ user }}/.fzf
    depth: 1

- name: Install fzf
  command: /home/{{ user }}/.fzf/install --key-bindings --completion --no-update-rc

- name: Create fonts directory
  file: 
    path: /home/{{ user }}/.local/share/fonts 
    state: directory
 
- name: Install BitstreamVeraSansMono.zip
  unarchive:
    src: https://github.com/ryanoasis/nerd-fonts/releases/download/v1.2.0/BitstreamVeraSansMono.zip
    dest: /home/{{ user }}/.local/share/fonts
    remote_src: yes

- name: Clone gotop repo
  become: yes
  git:
    repo: https://github.com/cjbassi/gotop
    dest: /tmp/gotop
    depth: 1

- name: Install gotop
  become: yes
  shell: /tmp/gotop/scripts/download.sh && mv gotop /usr/local/bin
